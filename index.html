<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Productivity Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
    <div class="max-w-6xl mx-auto">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">My Productivity Dashboard</h1>
            <div class="flex items-center justify-center text-gray-600">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                <span id="current-date"></span>
            </div>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
            <!-- Tasks Section -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">Tasks</h2>
                
                <div class="flex gap-2 mb-4">
                    <input
                        type="text"
                        id="new-task-input"
                        placeholder="Add a new task..."
                        class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                    <button
                        id="add-task-btn"
                        class="bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600 transition-colors"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </button>
                </div>

                <div id="tasks-list" class="space-y-2 max-h-96 overflow-y-auto"></div>

                <div class="mt-4 pt-4 border-t border-gray-200">
                    <p id="tasks-progress" class="text-sm text-gray-600"></p>
                </div>
            </div>

            <!-- Habits Section -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">Habit Tracker</h2>
                
                <div class="flex gap-2 mb-4">
                    <input
                        type="text"
                        id="new-habit-input"
                        placeholder="Add a new habit..."
                        class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                    />
                    <button
                        id="add-habit-btn"
                        class="bg-indigo-500 text-white p-2 rounded-lg hover:bg-indigo-600 transition-colors"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </button>
                </div>

                <div id="habits-list" class="space-y-3 max-h-96 overflow-y-auto"></div>

                <div class="mt-4 pt-4 border-t border-gray-200">
                    <p id="habits-progress" class="text-sm text-gray-600"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // State
        let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
        let habits = JSON.parse(localStorage.getItem('habits') || '[]');

        // Display current date
        document.getElementById('current-date').textContent = new Date().toDateString();

        // Tasks functions
        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        function renderTasks() {
            const tasksList = document.getElementById('tasks-list');
            const tasksProgress = document.getElementById('tasks-progress');
            
            if (tasks.length === 0) {
                tasksList.innerHTML = '<p class="text-gray-400 text-center py-8">No tasks yet. Add one above!</p>';
                tasksProgress.textContent = '';
                return;
            }

            tasksList.innerHTML = tasks.map(task => `
                <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <button
                        onclick="toggleTask(${task.id})"
                        class="flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center transition-colors ${
                            task.completed
                                ? 'bg-green-500 border-green-500'
                                : 'border-gray-300 hover:border-green-500'
                        }"
                    >
                        ${task.completed ? '<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>' : ''}
                    </button>
                    <span class="flex-1 ${task.completed ? 'line-through text-gray-400' : 'text-gray-700'}">
                        ${task.text}
                    </span>
                    <button
                        onclick="deleteTask(${task.id})"
                        class="text-red-500 hover:text-red-700 transition-colors"
                    >
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                    </button>
                </div>
            `).join('');

            const completed = tasks.filter(t => t.completed).length;
            tasksProgress.textContent = `${completed} of ${tasks.length} completed`;
        }

        function addTask() {
            const input = document.getElementById('new-task-input');
            const text = input.value.trim();
            
            if (text) {
                tasks.push({ id: Date.now(), text: text, completed: false });
                input.value = '';
                saveTasks();
                renderTasks();
            }
        }

        function toggleTask(id) {
            tasks = tasks.map(task => 
                task.id === id ? { ...task, completed: !task.completed } : task
            );
            saveTasks();
            renderTasks();
        }

        function deleteTask(id) {
            tasks = tasks.filter(task => task.id !== id);
            saveTasks();
            renderTasks();
        }

        // Habits functions
        function saveHabits() {
            localStorage.setItem('habits', JSON.stringify(habits));
        }

        function isHabitCompletedToday(habit) {
            const today = new Date().toDateString();
            return (habit.completedDates || []).includes(today);
        }

        function renderHabits() {
            const habitsList = document.getElementById('habits-list');
            const habitsProgress = document.getElementById('habits-progress');
            
            if (habits.length === 0) {
                habitsList.innerHTML = '<p class="text-gray-400 text-center py-8">No habits yet. Start tracking one!</p>';
                habitsProgress.textContent = '';
                return;
            }

            habitsList.innerHTML = habits.map(habit => {
                const completedToday = isHabitCompletedToday(habit);
                return `
                    <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium text-gray-700">${habit.name}</span>
                            <button
                                onclick="deleteHabit(${habit.id})"
                                class="text-red-500 hover:text-red-700 transition-colors"
                            >
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <button
                                onclick="toggleHabitToday(${habit.id})"
                                class="px-4 py-2 rounded-lg font-medium transition-colors ${
                                    completedToday
                                        ? 'bg-green-500 text-white hover:bg-green-600'
                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                }"
                            >
                                ${completedToday ? 'Done Today ✓' : 'Mark Complete'}
                            </button>
                            
                            <div class="text-right">
                                <p class="text-2xl font-bold text-indigo-600">${habit.streak || 0}</p>
                                <p class="text-xs text-gray-500">day streak</p>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            const completed = habits.filter(h => isHabitCompletedToday(h)).length;
            habitsProgress.textContent = `${completed} of ${habits.length} completed today`;
        }

        function addHabit() {
            const input = document.getElementById('new-habit-input');
            const name = input.value.trim();
            
            if (name) {
                habits.push({ 
                    id: Date.now(), 
                    name: name, 
                    completedDates: [],
                    streak: 0
                });
                input.value = '';
                saveHabits();
                renderHabits();
            }
        }

        function toggleHabitToday(id) {
            const today = new Date().toDateString();
            habits = habits.map(habit => {
                if (habit.id === id) {
                    const completedDates = habit.completedDates || [];
                    const isCompletedToday = completedDates.includes(today);
                    
                    let newCompletedDates;
                    let newStreak = habit.streak || 0;
                    
                    if (isCompletedToday) {
                        newCompletedDates = completedDates.filter(date => date !== today);
                        newStreak = Math.max(0, newStreak - 1);
                    } else {
                        newCompletedDates = [...completedDates, today];
                        newStreak = newStreak + 1;
                    }
                    
                    return { ...habit, completedDates: newCompletedDates, streak: newStreak };
                }
                return habit;
            });
            saveHabits();
            renderHabits();
        }

        function deleteHabit(id) {
            habits = habits.filter(habit => habit.id !== id);
            saveHabits();
            renderHabits();
        }

        // Event listeners
        document.getElementById('add-task-btn').addEventListener('click', addTask);
        document.getElementById('new-task-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') addTask();
        });

        document.getElementById('add-habit-btn').addEventListener('click', addHabit);
        document.getElementById('new-habit-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') addHabit();
        });

        // Initial render
        renderTasks();
        renderHabits();
    </script>
</body>
</html>